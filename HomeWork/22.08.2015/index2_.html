<!doctype html>
<html>
	<head>
		<meta charset-"utf-8">
		<link href="style.css" rel="stylesheet" type="text/css">
		<title>Цикл while</title>
	</head>
	<body>
<div id="frame">
		<a href="../../../../index.html"><b>| НА ГЛАВНУЮ |</b></a>
	<div id="ball"></div>
</div>
<script>
		var ball = document.getElementById('ball');
		var frame = document.getElementById('frame');

	var directionX = 1; // - вправо, =-1 - влево //
	var directionY = 1; // - вниз, =-1 - вверх //

var x0=x=ball.offsetLeft;
var y0=y=ball.offsetTop;
var deltaX = 5;
var deltaY = 5;
var duration = 3000;
var frameWidth  = frame.offsetWidth;
var frameHeight = frame.offsetHeight;
var ballWidth   = ball.offsetWidth; 
var ballHeight  = ball.offsetHeight;

var timeout = duration/((frameWidth-ballWidth-x)/deltaX);

function move(){
	x+=deltaX*directionX;
	y+=deltaY*directionY;
	ball.style.left = x + "px";
	ball.style.top = y + "px";
	if(x>=frameWidth-ballWidth-deltaX){
		directionX=-1;
	}
	if(x<=x0){
		directionX=1;
	}
	if(y>=frameHeight-ballHeight-deltaY){
		directionY=-1;
	}
	if(y<=y0){
		directionY=1;
	}
	setTimeout(move, timeout);


var context=ball.getContext("2d");

context.clearRect(0, 0, ball.width, ball.height);

var q1 = Math.floor((Math.round(Math.random()*10))/4);
var q2 = Math.floor((Math.round(Math.random()*10))/4);

var x1 = 20+Math.round((Math.random()*10));
var y1 = 20+Math.round((Math.random()*10));

context.translate(ball.width/2,ball.height/2);

context.translate(x1,y1);

context.rotate(Math.PI/q1);
context.rotate(Math.PI/q2);
}

	move();
</script>
	</body>
</html>
